<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login" color="primary"></ion-back-button>
    </ion-buttons>
    <ion-title class="ion-text-center">Criar Conta</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="register-container">
    <!-- Cabeçalho -->
    <div class="ion-text-center ion-padding-vertical">
      <h1><ion-text color="primary">Registre-se</ion-text></h1>
      <p><ion-text color="medium">Preencha seus dados para criar sua conta</ion-text></p>
    </div>

    <form (ngSubmit)="register()" #registerForm="ngForm" class="ion-margin">
      <!-- Nome -->
      <ion-item class="ion-margin-bottom auth-input">
        <ion-icon name="person-outline" slot="start" color="primary"></ion-icon>
        <ion-label position="stacked">Nome Completo</ion-label>
        <ion-input [(ngModel)]="user.name" name="name" required placeholder="Digite seu nome"></ion-input>
      </ion-item>
      <ion-text color="danger" class="error-message"
        *ngIf="registerForm.submitted && !registerForm.controls['name']?.valid">
        <ion-icon name="alert-circle-outline"></ion-icon>
        <span>Por favor, insira seu nome completo.</span>
      </ion-text>

      <!-- Email -->
      <ion-item class="ion-margin-bottom auth-input">
        <ion-icon name="mail-outline" slot="start" color="primary"></ion-icon>
        <ion-label position="stacked">Email</ion-label>
        <ion-input [(ngModel)]="user.email" name="email" type="email" required email
          placeholder="seu@email.com"></ion-input>
      </ion-item>
      <ion-text color="danger" class="error-message"
        *ngIf="registerForm.submitted && !registerForm.controls['email']?.valid">
        <ion-icon name="alert-circle-outline"></ion-icon>
        <span>Por favor, insira um email válido.</span>
      </ion-text>

      <!-- Telefone -->
      <ion-item class="ion-margin-bottom auth-input">
        <ion-icon name="call-outline" slot="start" color="primary"></ion-icon>
        <ion-label position="stacked">Telefone</ion-label>
        <ion-input [(ngModel)]="user.phone" name="phone" required type="tel" placeholder="(00) 00000-0000"></ion-input>
      </ion-item>
      <ion-text color="danger" class="error-message"
        *ngIf="registerForm.submitted && !registerForm.controls['phone']?.valid">
        <ion-icon name="alert-circle-outline"></ion-icon>
        <span>Por favor, insira um telefone válido.</span>
      </ion-text>

      <!-- Senha -->
      <ion-item class="ion-margin-bottom auth-input">
        <ion-icon name="lock-closed-outline" slot="start" color="primary"></ion-icon>
        <ion-label position="stacked">Senha</ion-label>
        <ion-input type="password" [(ngModel)]="password" name="password" required minlength="6"
          placeholder="Mínimo 6 caracteres"></ion-input>
      </ion-item>
      <ion-text color="danger" class="error-message"
        *ngIf="registerForm.submitted && !registerForm.controls['password']?.valid">
        <ion-icon name="alert-circle-outline"></ion-icon>
        <span>A senha deve ter pelo menos 6 caracteres.</span>
      </ion-text>

      <!-- Botão Registrar -->
      <ion-button expand="block" type="submit" class="ion-margin-top register-button" shape="round">
        <ion-icon name="person-add-outline" slot="start"></ion-icon>
        Criar Conta
      </ion-button>
    </form>

    <!-- Divider -->
    <div class="divider ion-margin-vertical">
      <ion-text color="medium">ou registre-se com</ion-text>
    </div>

    <!-- Social Registration -->
    <!-- <div class="social-buttons ion-padding-horizontal">
      <ion-button expand="block" fill="outline" class="ion-margin-bottom" shape="round">
        <ion-icon slot="start" name="logo-google"></ion-icon>
        Google
      </ion-button>
      <ion-button expand="block" fill="outline" color="secondary" shape="round">
        <ion-icon slot="start" name="logo-facebook"></ion-icon>
        Facebook
      </ion-button>
    </div> -->

    <!-- Login Link -->
    <div class="ion-text-center ion-padding-vertical">
      <ion-text color="medium">Já tem uma conta?</ion-text>
      <ion-button fill="clear" color="secondary" routerLink="/login">
        Fazer Login
      </ion-button>
    </div>
  </div>
</ion-content>

<style>
  .register-container {
    max-width: 400px;
    margin: 0 auto;
    padding: 16px;
  }

  .auth-input {
    --background: var(--ion-item-background);
    --border-radius: 12px;
    --border-width: 1px;
    --border-style: solid;
    --border-color: var(--ion-border-color);
    margin-bottom: 16px;
    --padding-start: 12px;
    --padding-end: 12px;
    --padding-top: 8px;
    --padding-bottom: 8px;
  }

  .auth-input.item-has-focus {
    --border-color: var(--ion-color-primary);
  }

  .error-message {
    display: flex;
    align-items: center;
    font-size: 0.875rem;
    margin: 4px 0 16px 16px;
  }

  .error-message ion-icon {
    margin-right: 4px;
    font-size: 16px;
  }

  .register-button {
    --box-shadow: 0 4px 12px rgba(var(--ion-color-primary-rgb), 0.2);
    margin: 24px 0;
    height: 48px;
  }

  .divider {
    display: flex;
    align-items: center;
    text-align: center;
    margin: 24px 0;
  }

  .divider::before,
  .divider::after {
    content: '';
    flex: 1;
    border-bottom: 1px solid var(--ion-border-color);
    margin: 0 16px;
  }

  .social-buttons ion-button {
    --border-width: 1px;
    height: 48px;
  }

  /* Dark mode specific styles */
  @media (prefers-color-scheme: dark) {
    .auth-input {
      --background: rgba(var(--ion-color-primary-rgb), 0.1);
    }

    .register-button {
      --box-shadow: 0 4px 12px rgba(var(--ion-color-primary-rgb), 0.4);
    }
  }
</style>
